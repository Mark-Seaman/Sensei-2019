{% extends "unc_theme.html" %}


{% block content %}
    <h1>Page Test Results</h1>
    <div class="card">

        <div class="card-header ch-alt">
            Test My Page
        </div>

        <div class="card-body card-padding">

            <h3>Run Cyborg Tester</h3>
            <p>
                Page Tested: <a href="{{ test_results.url }}">{{ test_results.url }}</a>
            </p>
            <p>
                Test Run at <b>{{ test_results.date }}</b>
            </p>
            <p>
                This server will visit the address for your website. It will request a copy of your web page.
                Then the page will be analyzed to see if it meets all of the requirements listed in the "Build It"
                section for
                this project.
            </p>
            <p>
                <a class="btn btn-primary" href="test">Test My Page</a>
            </p>

            <h3>Project Requirements</h3>
            <p>
                <a href="/unc/{{ course }}/project/{{ project }}">Project {{ project }} Instructions</a>
            </p>

        </div>
    </div>


    <div class="card">

        <div class="card-header ch-alt">
            Requirements
        </div>

        <div class="card-body card-padding">

            <div class="accordion" id="my-accordion">

                <div class="card">

                    <div class="card-header collapse-header" id="heading-source">

                        <button class="btn btn-selector" type="button" data-toggle="collapse"
                                data-target="#pane-source"
                                aria-expanded="true" aria-controls="pane-source">
                            <b>View Page Source</b>

                        </button>

                    </div>

                    <div id="pane-source" class="collapse"
                         aria-labelledby="heading-source"
                         data-parent="#my-accordion">

                        <div class="card-body">
                            <h3>{{ test_results.url }}</h3>

                            <pre>{{ test_results.source }}</pre>
                        </div>

                    </div>

                </div>
            </div>

            {% for r in test_results.requirements %}
                <h3>Requirement: {{ r.selector }} <img src="{{ r.face }}" width="100px" alt="test status"></h3>
                <p>
                    <b>Status: </b> {{ r.status }}
                </p>
                <p>
                    <b>Actual Output: </b> {{ r.actual }}
                </p>
                <p>
                    <b>Correct Output: </b> {{ r.correct }}
                </p>
            {% endfor %}
        </div>
    </div>


{% endblock %}